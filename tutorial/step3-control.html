<!DOCTYPE html>
<title>Asteroids!</title>
<body><script>

    document.body.style.backgroundColor = 'black'
    document.body.style.margin = '0px'
    document.body.style.overflow = 'hidden'
    
    let keyboard = {}
    addEventListener('keydown', function(event) {keyboard[event.key] = true})
    addEventListener('keyup', function(event) {keyboard[event.key] = false})
    
    let ship = createShip()

    runGame()

    function createShip() {
        let x = window.innerWidth / 2
        let y = window.innerHeight / 2
        let ship = createSprite('images/ship.png', 30, 30, x, y, 0)
        return ship
    }

    function createSprite(image, width, height, x, y, radians) {
        return {
            element: createSpriteElement(image, width, height, x, y, radians),
            x: x,
            y: y,
            velocityX: 0,
            velocityY: 0,
            radians: radians,
        }
    }

    function createSpriteElement(image, width, height, x, y, radians) {
        let element = document.createElement('div')
        element.style.position = 'absolute'
        element.style.width = width + 'px'
        element.style.height = height + 'px'
        element.style.transform = 'translate(-50%, -50%)'
        element.style.transformOrigin = 'top left'
        element.style.backgroundImage = 'url("' + image + '")'
        element.style.backgroundSize = 'contain'
        element.style.left = x + 'px'
        element.style.top = y + 'px'
        element.style.rotate = radians + 'rad'
        document.body.appendChild(element)
        return element
    }

    function runGame() {
        controlShip()
        moveSprite(ship)  
        requestAnimationFrame(runGame)
    }    

    function controlShip() {
        if(keyboard.ArrowLeft) {
            ship.radians -= 0.1
        }
        if(keyboard.ArrowRight) {
            ship.radians += 0.1
        }
        if(keyboard.ArrowUp) {
            ship.velocityX += Math.cos(ship.radians) * 0.1
            ship.velocityY += Math.sin(ship.radians) * 0.1
        }
        if(keyboard.Enter) {
            
        }
    }    

    function moveSprite(sprite) {
        sprite.x += sprite.velocityX
        sprite.y += sprite.velocityY
        let minX = -50
        let maxX = window.innerWidth + 50
        let minY = -50
        let maxY = window.innerHeight + 50
        if(sprite.x < minX) sprite.x = maxX
        if(sprite.x > maxX) sprite.x = minX
        if(sprite.y < minY) sprite.y = maxY
        if(sprite.y > maxY) sprite.y = minY
        sprite.element.style.left = sprite.x + 'px'
        sprite.element.style.top = sprite.y + 'px'
        sprite.element.style.rotate = sprite.radians + 'rad'
    }

</script></body>
